<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    
    <h3>할일 목록 만들어보기</h3>

    <form class="nameForm">
        <h3 class="nameTitle"></h3>
        <input type="text" placeholder="이름을 입력하세요">
        <button type="button" id="nameBtn">확인</button>
    </form>

    <form class="todoForm">
        <input type="text" placeholder="할일을 작성하세요">
        <button type="button" id="todoBtn">확인</button>
    </form>

    <ul class="todoList">

    </ul>

    <script>
        var ul = document.querySelector(".todoList");
        var nameBtn = document.getElementById("nameBtn");
        nameBtn.onclick = function() {
            
            var input = document.querySelector(".nameForm > input");
            var nameTitle = document.querySelector(".nameTitle");
            input.style.display = "none";
            nameBtn.style.display = "none";
            
            nameTitle.innerHTML = input.value + "님 안녕하세요";
            

        }

        var todoBtn = document.getElementById("todoBtn");
        todoBtn.addEventListener("click" , function() {
            
            var btn = document.createElement("button");
            btn.innerHTML = "X";
            btn.addEventListener("click", function(){

                this.parentElement.remove();

            });

            var down = document.createElement("button");
            down.innerHTML = "↓";
            down.addEventListener("click", function() {

                var current = this.parentElement;
                console.log(current);
                var next = current.nextElementSibling;
                console.log(next);

                if(next == null){
                    alert("마지막 행입니다");
                    return;
                }
                if(confirm("이동하시겠습니까?")){
                ul.insertBefore(next,current);

                }

                

            })

            var up = document.createElement("button");
            up.innerHTML = "↑";
            up.addEventListener("click", function() {

                var current = this.parentElement;
                console.log(current);
                var next = current.previousElementSibling;
                console.log(next);
                
                if(next == null){
                    alert("첫번째 행입니다");
                    return;
                }

                if(confirm("이동하시겠습니까?")){
                ul.insertBefore(current,next);

                }

                })

            var input2 = document.querySelector(".todoForm > input");
            var todoList = document.querySelector(".todoList");
            var li = document.createElement("li");
        
            li.innerHTML = input2.value;
            li.appendChild(btn);
            li.appendChild(down);
            li.appendChild(up);
            
            todoList.appendChild(li); //appenChild에는 태그의 모형만 들어갈 수 있음
            input2.value = "";
            

        });

    
    </script>
    
</body>
</html>